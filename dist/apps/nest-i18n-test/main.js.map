{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./apps/nest-i18n-test/src/app.controller.ts","webpack:///./apps/nest-i18n-test/src/app.module.ts","webpack:///./apps/nest-i18n-test/src/app.service.ts","webpack:///./apps/nest-i18n-test/src/http-exception.filter.ts","webpack:///./apps/nest-i18n-test/src/main.ts","webpack:///./libs/auth/src/index.ts","webpack:///./libs/auth/src/lib/auth.controller.ts","webpack:///./libs/auth/src/lib/auth.module.ts","webpack:///./libs/auth/src/lib/auth.service.ts","webpack:///./libs/auth/src/lib/local.guard.ts","webpack:///./libs/auth/src/lib/local.strategy.ts","webpack:///./libs/prisma/src/index.ts","webpack:///./libs/prisma/src/lib/prisma.module.ts","webpack:///./libs/prisma/src/lib/prisma.service.ts","webpack:///external \"@nestjs/common\"","webpack:///external \"@nestjs/config\"","webpack:///external \"@nestjs/core\"","webpack:///external \"@nestjs/jwt\"","webpack:///external \"@nestjs/passport\"","webpack:///external \"@prisma/client\"","webpack:///external \"nestjs-i18n\"","webpack:///external \"passport-local\"","webpack:///external \"path\"","webpack:///external \"tslib\""],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Controller, Get } from '@nestjs/common';\n\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  getData() {\n    return this.appService.getData();\n  }\n}\n","import { AuthModule } from '@nest-i18n-test/auth';\nimport { PrismaModule } from '@nest-i18n-test/prisma';\nimport { Module } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { APP_FILTER } from '@nestjs/core';\nimport {\n  AcceptLanguageResolver,\n  I18nJsonParser,\n  I18nModule,\n} from 'nestjs-i18n';\nimport * as path from 'path';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { AllExceptionsFilter } from './http-exception.filter';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({ isGlobal: true }),\n\n    I18nModule.forRootAsync({\n      useFactory: async () => {\n        return {\n          fallbackLanguage: 'en',\n          parserOptions: {\n            path: path.join(__dirname, '/locales/'),\n            watch: true, //enable live translations\n          },\n        };\n      },\n      parser: I18nJsonParser,\n      resolvers: [AcceptLanguageResolver],\n    }),\n    AuthModule,\n    PrismaModule,\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    {\n      provide: APP_FILTER,\n      useClass: AllExceptionsFilter, // global filter\n    },\n  ],\n})\nexport class AppModule {}\n","import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class AppService {\n  getData(): { message: string } {\n    return { message: 'Welcome to nest-i18n-test!' };\n  }\n}\n","import {\n  ArgumentsHost,\n  Catch,\n  ExceptionFilter,\n  HttpException,\n} from '@nestjs/common';\nimport { Response } from 'express';\nimport { I18nService } from 'nestjs-i18n';\n\n@Catch(HttpException)\nexport class AllExceptionsFilter implements ExceptionFilter {\n  constructor(private readonly i18n: I18nService) {}\n\n  async catch(exception: HttpException, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse<Response>();\n    const statusCode = exception.getStatus();\n\n    const req = ctx.getRequest();\n\n    let message = exception.getResponse() as {\n      key: string;\n      args: Record<string, any>;\n    };\n\n    message = await this.i18n.translate(message.key, {\n      lang: ctx.getRequest().i18nLang,\n      args: message.args,\n    });\n\n    response.status(statusCode).json({ statusCode, message });\n  }\n}\n","/**\n * This is not a production server yet!\n * This is only a minimal backend to get started.\n */\n\nimport { Logger } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  const port = process.env.PORT || 3333;\n  await app.listen(port, () => {\n    Logger.log('Listening at http://localhost:' + port + '/');\n  });\n}\n\nbootstrap();\n","export * from './lib/auth.module';\n","import { PrismaService } from '@nest-i18n-test/prisma';\nimport { Body, Controller, Post, Req, UseGuards } from '@nestjs/common';\nimport { AuthService } from './auth.service';\nimport { LocalAuthGuard } from './local.guard';\nimport { Request } from './request.interface';\n\n@Controller('auth')\nexport class AuthController {\n  constructor(\n    private prisma: PrismaService,\n    private authService: AuthService\n  ) {}\n\n  @Post('register')\n  async register(@Body() data: { email: string; password: string }) {\n    const { email, password } = data;\n    return await this.authService.register(email, password);\n  }\n\n  @Post('login')\n  @UseGuards(LocalAuthGuard)\n  async login(@Req() request: Request) {\n    console.log(request);\n    const { user } = request;\n    const {\n      accessToken,\n      accessCookie,\n    } = this.authService.getCookieAndAccessToken(user.id);\n    request.res.setHeader('Set-Cookie', [accessCookie]);\n\n    return await this.prisma.user.update({\n      where: {\n        id: user.id,\n      },\n      data: {\n        accessToken,\n      },\n    });\n  }\n}\n","import { Module } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\nimport { JwtModule } from '@nestjs/jwt';\nimport { PassportModule } from '@nestjs/passport';\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\nimport { LocalStrategy } from './local.strategy';\n\n@Module({\n  imports: [\n    PassportModule.register({\n      defaultStrategy: 'jwt',\n    }),\n    JwtModule.registerAsync({\n      useFactory: async (configService: ConfigService) => {\n        return {\n          secret: configService.get<string>('JWT_ACCESS_SECRET'),\n          signOptions: {\n            expiresIn: configService.get<string>('JWT_EXPIRATION'),\n          },\n        };\n      },\n      inject: [ConfigService],\n    }),\n  ],\n  controllers: [AuthController],\n  providers: [AuthService, LocalStrategy],\n  exports: [AuthService],\n})\nexport class AuthModule {}\n","import { PrismaService } from '@nest-i18n-test/prisma';\nimport { HttpException, HttpStatus, Injectable } from '@nestjs/common';\nimport { JwtService } from '@nestjs/jwt';\n\n@Injectable()\nexport class AuthService {\n  constructor(private prisma: PrismaService, private jwtService: JwtService) {}\n\n  private generateAccessToken(payload: { userId: string }): string {\n    return this.jwtService.sign(payload);\n  }\n\n  getCookieAndAccessToken(userId: string) {\n    const token = this.generateAccessToken({ userId });\n    const cookie = `Access=${token}; HttpOnly; Path=/; Max-Age=\"6d\"`;\n    return {\n      accessToken: token,\n      accessCookie: cookie,\n    };\n  }\n\n  // check password if matches, return user if matches\n  async validateUser(email: string, password: string) {\n    const user = await this.prisma.user.findUnique({\n      where: { email },\n      select: {\n        id: true,\n        password: true,\n      },\n    });\n\n    if (user) {\n      const isMatch = password === user.password;\n      if (!isMatch)\n        throw new HttpException(\n          {\n            key: 'auth.USER_CREDENTIALS_WRONG',\n          },\n          HttpStatus.UNAUTHORIZED\n        );\n      return await this.prisma.user.findUnique({\n        where: {\n          id: user.id,\n        },\n      });\n    }\n    return null;\n  }\n\n  // register\n\n  async register(email: string, password: string) {\n    const isExisting = await this.prisma.user.findUnique({\n      where: {\n        email,\n      },\n    });\n    if (isExisting)\n      throw new HttpException(\n        {\n          key: 'auth.USER_ALREADY_EXISTS_EMAIL',\n          args: {\n            email,\n          },\n        },\n        HttpStatus.CONFLICT\n      );\n\n    return await this.prisma.user.create({\n      data: {\n        email,\n        password,\n      },\n    });\n  }\n}\n","import { Injectable } from '@nestjs/common';\nimport { AuthGuard } from '@nestjs/passport';\n\n@Injectable()\nexport class LocalAuthGuard extends AuthGuard('local') {}\n","import { Injectable } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy } from 'passport-local';\nimport { AuthService } from './auth.service';\n\n@Injectable()\nexport class LocalStrategy extends PassportStrategy(Strategy) {\n  constructor(private authService: AuthService) {\n    super({\n      usernameField: 'email',\n    });\n  }\n  async validate(email: string, password: string) {\n    return this.authService.validateUser(email, password);\n  }\n}\n","export * from './lib/prisma.module';\nexport * from './lib/prisma.service';\n","import { Global, Module } from '@nestjs/common';\nimport { PrismaService } from './prisma.service';\n\n@Global()\n@Module({\n  controllers: [],\n  providers: [PrismaService],\n  exports: [PrismaService],\n})\nexport class PrismaModule {}\n","import { Injectable, OnModuleDestroy } from '@nestjs/common';\nimport { PrismaClient } from '@prisma/client';\n\n@Injectable()\nexport class PrismaService extends PrismaClient implements OnModuleDestroy {\n  constructor() {\n    super();\n  }\n  // async onModuleInit() {\n  //     // optional and better for performance, because of prisma client lazy connect behavior\n  //     // https://github.com/fivethree-team/nestjs-prisma-starter/issues/438\n  //     await this.$connect()\n  // }\n\n  async onModuleDestroy() {\n    await this.$disconnect();\n  }\n}\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/config\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/jwt\");","module.exports = require(\"@nestjs/passport\");","module.exports = require(\"@prisma/client\");","module.exports = require(\"nestjs-i18n\");","module.exports = require(\"passport-local\");","module.exports = require(\"path\");","module.exports = require(\"tslib\");"],"sourceRoot":""}